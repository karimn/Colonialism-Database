<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>Peanut Search >> Government Data >> Search</title>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	<link rel="stylesheet" media="screen" type="text/css" href="/static/css/peanut.css" />
	<link rel="stylesheet" media="screen" type="text/css" href="/static/css/dark-hive/jquery-ui-1.8.11.custom.css" />
	<link rel="stylesheet" media="screen" type="text/css" href="/static/css/jquery.autocomplete.css" />
	<script src="/static/js/peanut.js" type="text/javascript"></script>
	<script src="http://code.jquery.com/jquery-1.5.min.js" type="text/javascript"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.js" type="text/javascript"></script>
	<script src="http://jquery.bassistance.de/autocomplete/jquery.autocomplete.js" type="text/javascript"></script>
</head>
<body>
	<div id="links"><span id="tag">Search: </span>| <a href="../government">Government Data</a> | <a href="../education">Education Data</a> | <a href="../population">Population Data</a> | <a href="../economics">Economics Data</a> ||</div>
	<div id="form" align="center">
		<script>
		$(function() {
			//$( "#startdate" ).datepicker({ minDate: -20, maxDate: "+1M +10D" });
			$( "#startdate" ).datepicker({dateFormat: 'yy-mm-dd'});
			$( "#enddate" ).datepicker({dateFormat: 'yy-mm-dd'});
			//$( "#enddate" ).datepicker({ minDate: -20, maxDate: "+1M +10D" });
		});
		</script>
		<form action='government' method="GET">
			Start date:  <input type="text" id="startdate" name="startdate" value="{{ startdate|escape }}" />
			End date:  <input type="text" id="enddate" name="enddate" value="{{ enddate|escape }}" />
			<br /><br /><br />
			<span id="sourceentry">Source:  <input type="text" id="sourceinput" name="sourceinput" value = "{{ sourceinput|escape }}" /></span>
			<br /><br /><br />
			<div class="ui-widget">
				Location:  <input type="text" id="locations" name="locations" value = "{{ searchlocations|escape }}" />
				<script>
			   		$(function(){
			   			function formatItem(row) {
							return row;
						}
						function formatResult(row) {
							//return row.replace(/(<.+?>)/gi, '');
							return row
						}  			
			   			
			   			$("#locations").autocomplete('{% url government.views.locationlookup %}', {		   			
							width: 320,
							max: 100,
							cacheLength: 10,
							highlight: false,
							multiple: true,
							multipleSeparator: ", ",
							scroll: true,
							scrollHeight: 300,
							dataType: 'json',
							formatItem: formatItem,
							formatResult: formatResult,
							parse: function(data) {
									return $.map(data, function(row) {
										return { data:row, value:row, result:row };
									});
								}}).result(
									function(e, row, data) {
				          				$("#locations").val = row;
				      				});
				      			$("#sourceentry").css("left","-20%");
				   		});		
				</script></div>
			<br /><br /><br />
			<input type='submit' name='search' value='Search' />
		</form>
	</div>
		<div id="results">
			<br />
			{% if results %}
				<table>
					<tr><td>ID</td><td>Source</td><td>Begin Date</td><td>End Date</td><td>Circa</td><td>Location</td><td> Value Units</td><td>Spatial Area</td><td>Spatial Area Unit</td><td>Currency</td><td>Currency Exchange Rate</td><td>Revenue</td><td>Revenue Type</td><td>Expenditure</td><td>Expenditure Type</td><td>Public Debt</td><td>Military</td><td>Military Type</td><td>Officials</td><td>Officials Type</td><td>Spatial Page No</td><td>Military Page No</td><td>Primary Source Text</td><td>Primary Source Object</td></tr>
				{% for data in results.object_list %}
					<tr><td>{{ data.id }}</td><td><a href="../sourceinfo?source='{{ data.source }}'">{{ data.source }}</a></td><td>{{ data.begin_date }}</td><td>{{ data.end_date }}</td><td>{{ data.circa }}</td><td>{{ data.location }}</td><td>{{ data.value_unit }}</td><td>{{ data.spatial_area }}</td><td>{{ data.spatial_area_unit }}</td><td>{{ data.currency }}</td><td>{{ data.currency_exchange_rate }}</td><td>{{ data.revenue }}</td><td>{{ data.revenue_type }}</td><td>{{ data.expenditure }}</td><td>{{ data.expenditure_type }}</td><td>{{ data.public_debt }}</td><td>{{ data.military }}</td><td>{{ data.military_type }}</td><td>{{ data.officials }}</td><td>{{ data.officials_type }}</td><td>{{ data.spatial_page_num }}</td><td>{{ data.military_page_num }}</td><td>{{ data.primary_source_text }}</td><td>{{ data.primary_source_obj }}</td></tr>
					<!--<tr><td>{{ data.id }}</td><td>{{ data.active }}</td><td>{{ data.submitted_by }}</td><td>{{ data.datetime_created }}</td><td>{{ data.page_num }}</td><td>{{ data.source }}</td><td>{{ data.begin_date }}</td><td>{{ data.end_date }}</td><td>{{ data.circa }}</td><td>{{ data.location }}</td><td>{{ data.original_location_name }}</td><td>{{ data.alternate_location_name }}</td><td>{{ data.is_total }}</td><td>{{ data.value_unit }}</td><td>{{ data.remarks }}</td><td>{{ data.spatial_area }}</td><td>{{ data.spatial_area_unit }}</td><td>{{ data.currency }}</td><td>{{ data.currency_exchange_rate }}</td><td>{{ data.revenue }}</td><td>{{ data.revenue_type }}</td><td>{{ data.expenditure }}</td><td>{{ data.expenditure_type }}</td><td>{{ data.public_debt }}</td><td>{{ data.military }}</td><td>{{ data.military_type }}</td><td>{{ data.officials }}</td><td>{{ data.officials_type }}</td><td>{{ data.location }}</td><td>{{ data.spatial_page_num }}</td><td>{{ data.military_page_num }}</td><td>{{ data.primary_source_text }}</td><td>{{ data.primary_source_obj }}</td></tr>-->
				{% endfor %}
				</table>
			<br />
	<div class="pagination">
		<span class="step-links">
			<span><a href="?search={{ search }}&page=1&startdate={{ startdate }}&enddate={{ enddate }}&locations={{ searchlocations }}&sourceinput={{ sourceinput }}">first&nbsp;&nbsp;</a></span>
			{% if results.has_previous %}
			    <a href="?search={{ search }}&page={{ results.previous_page_number }}&startdate={{ startdate }}&enddate={{ enddate }}&locations={{ searchlocations }}&sourceinput={{ sourceinput }}"><span class="pagination-text-right">previous</span></a>
			{% endif %}
		<span class="current">
		    	Page {{ results.number }} of {{ results.paginator.num_pages }}.
		</span>
			{% if results.has_next %}
		    		<a href="?search={{ search }}&page={{ results.next_page_number }}&startdate={{ startdate }}&enddate={{ enddate }}&locations={{ searchlocations }}&sourceinput={{ sourceinput }}"><span class="pagination-text-left">next</span></a>
			{% endif %}
			<span><a href="?search={{ search }}&page={{ results.paginator.num_pages }}&startdate={{ startdate }}&enddate={{ enddate }}&locations={{ searchlocations }}&sourceinput={{ sourceinput }}">&nbsp;&nbsp;last</a></span>
		</span>
	</div>
	{% endif %}
</body>
</html>
